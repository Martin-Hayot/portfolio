---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import BlogList from "@/components/blog/BlogList";
import SearchInput from "@/components/SearchInput";

const allPosts = await getCollection("blog");
const sortedPosts = allPosts.sort((a, b) => {
    return (
        new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
    );
});

const pageTitle = "Blog";
---

<BaseLayout title={pageTitle}>
    <main class="max-w-2xl mx-auto">
        <header class="mb-12">
            <h1 class="text-3xl font-semibold text-neutral-100 mb-3">Blog</h1>
            <p class="text-neutral-400 text-base leading-relaxed">
                Thoughts, ideas, and learnings from my journey in development.
            </p>
        </header>

        <div class="mb-8">
            <SearchInput client:load />
        </div>

        <BlogList posts={sortedPosts} client:only="react" />
    </main>
</BaseLayout>
